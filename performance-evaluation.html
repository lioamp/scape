<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Performance Evaluation</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="style/style.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
        <!-- Include Chart.js library -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <style>
            /* Custom styling for the recommendation text */
            .small-text-recommendation {
                font-size: 0.85em; /* Smaller text for recommendations */
                line-height: 1.4;
            }
            /* Basic styling for chart containers to match card aesthetic */
            .chart-container-style {
                padding: 1.5rem;
                border: 1px solid #e0e0e0;
                border-radius: 0.75rem; /* Rounded corners */
                box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.05); /* Soft shadow */
                background-color: white;
            }
            /* Style for date input fields */
            .date-input {
                padding: 0.6rem 0.8rem;
                border: 1px solid #ced4da;
                border-radius: 0.5rem;
                font-size: 0.9rem;
                transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            }
            .date-input:focus {
                border-color: #80bdff;
                outline: 0;
                box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
            }
        </style>
    </head>

    <body>
        <div class="d-flex vh-100">
            <!-- Sidebar -->
            <div id="sidebar-container"></div>
            <!-- Main content -->
            <main class="flex-grow-1 p-4 d-flex flex-column gap-3 container-fluid" style="background-color: #fefef6;">
                <!-- Header and Filters (Matching Dashboard layout) -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 id="welcome-message" class="fw-semibold text-muted mb-0">Welcome to Performance Evaluation!</h5>
                    <div class="d-flex align-items-center gap-3">
                        <!-- Platform Filter (Placeholder for consistency with Dashboard) -->
                        <div class="dropdown">
                            <button class="btn dashboard-btn-gradient dropdown-toggle" type="button" id="platformFilterDropdown" data-bs-toggle="dropdown" aria-expanded="false" data-platform="all">
                                Platform: All
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="platformFilterDropdown">
                                <li><a class="dropdown-item" href="#" data-platform="all">All Platforms</a></li>
                                <li><a class="dropdown-item" href="#" data-platform="tiktok">TikTok</a></li>
                                <li><a class="dropdown-item" href="#" data-platform="facebook">Facebook</a></li>
                            </ul>
                        </div>
                        <!-- Date Range Filter Inputs -->
                        <div class="d-flex align-items-center gap-2">
                            <input type="date" id="startDate" class="date-input" title="Start Date">
                            <span>to</span>
                            <input type="date" id="endDate" class="date-input" title="End Date">
                            <button id="applyDateFilter" class="btn dashboard-btn-gradient">Apply</button>
                        </div>
                    </div>
                </div>

                <!-- KPI Cards Section -->
                <div class="row g-3 mb-3 justify-content-center">
                    <div class="col-md-4 col-sm-6 d-flex">
                        <div class="card flex-fill rounded-lg shadow-lg p-3" data-kpi="engagement">
                            <div class="card-header border-0 bg-white d-flex justify-content-between align-items-center fw-bold fs-5 text-dark">
                                <span>Engagement Rate</span>
                            </div>
                            <div class="card-body pt-0">
                                <p class="mb-1 text-muted">Current: <span id="engagementRateCurrent" class="fw-bold text-primary">Loading...</span></p>
                                <p class="mb-0 text-muted">Goal: <span id="engagementRateGoal" class="fw-bold text-success">Loading...</span></p>
                                <small class="text-muted fst-italic">DATE Range (adjusted based on campaign)</small>
                                <!-- Recommendation text box for Engagement -->
                                <div id="engagementRecommendation" class="p-2 mt-2 rounded border border-info bg-light text-primary text-center small-text-recommendation">
                                    Loading Recommendation...
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-6 d-flex">
                        <div class="card flex-fill rounded-lg shadow-lg p-3" data-kpi="reach">
                            <div class="card-header border-0 bg-white d-flex justify-content-between align-items-center fw-bold fs-5 text-dark">
                                <span>Reach</span>
                            </div>
                            <div class="card-body pt-0">
                                <p class="mb-1 text-muted">Current: <span id="reachCurrent" class="fw-bold text-primary">Loading...</span></p>
                                <p class="mb-0 text-muted">Goal: <span id="reachGoal" class="fw-bold text-success">Loading...</span></p>
                                <!-- Recommendation text box for Reach -->
                                <div id="reachRecommendation" class="p-2 mt-2 rounded border border-info bg-light text-primary text-center small-text-recommendation">
                                    Loading Recommendation...
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-6 d-flex">
                        <div class="card flex-fill rounded-lg shadow-lg p-3" data-kpi="conversion">
                            <div class="card-header border-0 bg-white d-flex justify-content-between align-items-center fw-bold fs-5 text-dark">
                                <span>Conversion Rate</span>
                            </div>
                            <div class="card-body pt-0">
                                <p class="mb-1 text-muted">Current: <span id="conversionRateCurrent" class="fw-bold text-primary">Loading...</span></p>
                                <p class="mb-0 text-muted">Goal: <span id="conversionRateGoal" class="fw-bold text-success">Loading...</span></p>
                                <small class="text-muted fst-italic">DATE Range (adjusted based on campaign)</small>
                                <!-- Recommendation text box for Conversion -->
                                <div id="conversionRecommendation" class="p-2 mt-2 rounded border border-info bg-light text-primary text-center small-text-recommendation">
                                    Loading Recommendation...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visualizations Container -->
                <div id="visualization-container" class="mt-4 row g-3">
                    <div id="engagement-chart-container" class="col-12 chart-container-style text-center">
                        <h3 class="fw-bold text-primary mb-3">Engagement Rate Over Time</h3>
                        <canvas id="engagementChart" style="max-height: 400px;"></canvas>
                        <p id="engagementRateInsight" class="mt-4 p-3 bg-light rounded text-muted text-start"></p>
                    </div>

                    <div id="reach-chart-container" class="col-12 chart-container-style text-center">
                        <h3 class="fw-bold text-primary mb-3">Reach Over Time</h3>
                        <canvas id="reachChart" style="max-height: 400px;"></canvas>
                        <p id="reachInsight" class="mt-4 p-3 bg-light rounded text-muted text-start"></p>
                    </div>

                    <div id="conversion-chart-container" class="col-12 chart-container-style text-center">
                        <h3 class="fw-bold text-primary mb-3">Conversion Rate: Goal vs. Current</h3>
                        <canvas id="conversionChart" style="max-height: 400px;"></canvas>
                        <p id="conversionRateInsight" class="mt-4 p-3 bg-light rounded text-muted text-start"></p>
                    </div>
                </div>
            </main>
        </div>
        
        <script src="js/loadSidebar.js" type="module"></script>
        <script src="js/auth.js" type="module"></script>
        <script type="module" src="js/performance-evaluation.js"></script>
    </body>
</html>
